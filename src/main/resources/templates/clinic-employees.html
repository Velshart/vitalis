<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Pracownicy Kliniki</title>
    <link rel="stylesheet" href="/css/wizyta.css">
    <link rel="icon" type="image/x-icon" href="/css/favicon.ico">
    <link rel="stylesheet" href="/css/modal.css">
</head>
<body>
<header>
    <div class="logo">
        <img src="/img/logo.png" alt="Logo">
    </div>
    <nav>
        <ul>
            <li><a th:href="@{/doctor/home}">Panel główny</a></li>
            <li><a th:href="@{/doctor/choose-specializations}">Moje specializacje</a></li>
            <li><a th:href="@{/logout}">Wyloguj się</a></li>
        </ul>
    </nav>
</header>
<div class="main-content">
    <div class="container">

        <div class="form-container">
            <h3>Dodaj pracowników do kliniki</h3>

            <h4>Aktualni pracownicy kliniki:</h4>
            <div th:each="employee : ${employees}">


                    <div>
                        <span th:text="${employee.username}"></span>
                        <button class="delete-employee" th:data-id="${employee.id}" th:data-clinic-id="${clinic.id}">Usuń</button>
                        <div id="deleteModal" class="modal">
                            <div class="modal-content">
                                <span class="close">&times;</span>
                                <h1>Czy na pewno chcesz usunąć pracownika z kliniki?</h1>
                                <form method="post" th:action="@{/clinic/employees/remove/{employeeId}(employeeId=${employee.id})}">
                                    <input type="hidden" th:name="clinicId" id="clinicId" th:value="${clinic.id}">
                                    <button type="submit">Tak</button>
                                </form>
                                <br>
                                <form th:action="@{/clinic/employees/{clinicId}(clinicId=${clinic.id})}" method="get">
                                    <button type="submit">Nie</button>
                                </form>
                            </div>

                        </div>

                    </div>
                </div>
                <br>

                <h4>Dodaj nowych pracowników:</h4>
                <div th:each="other : ${others}">
                    <div>
                        <span th:text="${other.username}"></span>
                        <form th:action="@{/clinic/employees/add/{employeeId}(employeeId=${other.id})}" method="post">
                            <input type="hidden" th:name="clinicId" th:value="${clinic.id}"/>
                            <button type="submit">Dodaj</button>
                        </form>
                    </div>
                </div>
                <br>

                <h4>Oczekujące na zatwierdzenie:</h4>
                <div th:each="pendingInvitation : ${pendingInvitations}">
                    <div>
                        <span th:text="${pendingInvitation.getDoctor().getUsername()}"></span>

                        <form method="post" th:action="@{/doctor/invitation-cancel/{id}(id=${pendingInvitation.id})}">
                            <input type="hidden" th:name="clinicId" th:value="${clinic.id}"/>
                            <input type="submit" value="Anuluj zaproszenie">
                        </form><br>
                    </div>
                </div><br>

                <form th:action="@{/doctor/home}" method="get">
                    <button type="submit">Wróć</button>
                </form>
            </div>
        </div>
    </div>

    <script src="/css/employee.js"></script>
</body>
</html>